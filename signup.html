<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./main.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>Login/Signup Form</title>
    <style>
      main {
        min-height: 50vh;
        position: relative;
      }
      .login {
        padding: 2rem;
        width: min(40rem, 100%);
        box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.5);
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 2rem;
      }

      .tab {
        overflow: hidden;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .tab button {
        width: 50%;
        padding: 1rem 0;
        border: none;
        background-color: var(--background);
        font-size: 1.25rem;
      }

      .tab button.active {
        background-color: #f5c94f;
      }

      .tabcontent {
        display: none;
      }

      #signupForm,
      #loginForm {
        display: none;
      }

      #successMessage,
      #signupSuccessMessage {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border-radius: 5px;
        display: none;
      }
      #loginForm form,
      #signupForm form {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }
      input {
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        border: none;
        border: 1px solid black;
      }
      input:focus {
        border-color: #f5c94f;
      }
    </style>
  </head>
  <body>
    <header>
      <nav>
        <div class="container">
          <div class="nav">
            <img src="./images/Travelo Logo.jpg" alt="Travelo Logo" />
            <ul>
              <li>
                <a href="/" class="link">Home</a>
                <a href="./templates/about.html" class="link">About Us</a>
              </li>
              <li>
                <a href="/templates/destinations.html" class="link"
                  >Destinations</a
                >
                <a href="./templates/services.html" class="link">Features</a>
              </li>
              <li>
                <a href="/templates/prices.html" class="link">Pricing</a>
                <a href="/templates/reviews.html" class="link">Reviews</a>
              </li>
            </ul>
            <div class="cta">
              <a href="/" class="primary-btn small">Log In</a>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <div class="container login">
        <div class="tab">
          <button
            id="loginTab"
            class="tablinks active"
            onclick="openTab(event, 'loginForm')"
          >
            Login
          </button>
          <button
            id="signupTab"
            class="tablinks"
            onclick="openTab(event, 'signupForm')"
          >
            Signup
          </button>
        </div>
        <div>
          <div id="loginForm" class="tabcontent">
            <h3>Login</h3>
            <form onsubmit="login(event)">
              <input
                type="email"
                id="loginEmail"
                placeholder="Email"
                required
              />
              <input
                type="password"
                id="loginPassword"
                placeholder="Password"
                required
              />
              <button type="submit" class="primary-btn">Login</button>
            </form>
          </div>

          <div id="signupForm" class="tabcontent">
            <h3>Signup</h3>
            <form onsubmit="signup(event)">
              <input type="text" id="signupName" placeholder="Name" required />
              <input
                type="email"
                id="signupEmail"
                placeholder="Email"
                required
              />
              <input
                type="password"
                id="signupPassword"
                placeholder="Password"
                required
              />
              <input
                type="password"
                id="signupConfirmPassword"
                placeholder="Confirm Password"
                required
              />
              <button type="submit" class="primary-btn">Signup</button>
            </form>
          </div>
        </div>
      </div>
      <div id="successMessage">Success! You have logged in.</div>
      <div id="signupSuccessMessage">
        Success! Your account has been created.
      </div>
    </main>

    <footer>
      <div class="container">
        <div>
          <div class="socials">
            <h3>Leading the way in adventure</h3>
            <div>
              <a href="https://www.facebook.com/" target="_blank">
                <i class="fa-brands fa-facebook-f" style="color: #000000"></i>
              </a>

              <a href="https://www.instagram.com/" target="_blank">
                <i class="fa-brands fa-instagram" style="color: #000000"></i>
              </a>
              <a href="https://www.twitter.com/" target="_blank">
                <i class="fa-brands fa-twitter" style="color: #000000"></i>
              </a>
              <a href="https://www.youtube.com/" target="_blank">
                <i class="fa-brands fa-youtube" style="color: #000000"></i>
              </a>
            </div>
          </div>
          <div class="newsletter">
            <h3>Join Our Newsletter</h3>
            <input type="email" placeholder="Enter your e-mail" />
            <img src="./images/icons/cta-btn.png" alt="Submit Icon" />
          </div>
        </div>
        <hr />
        <div>
          <div>
            <img src="./images/Travelo Logo.jpg" alt="Travelo Logo" />
            <p>
              Travell plans are not really an instrument themselves but a
              delivery mechanism or strategy for mostly others
            </p>
          </div>
          <div>
            <h4>Contact</h4>
            <a href="/">+913134566585</a>
            <a href="">info@travelo.com</a>
            <a href="">support@travelo.com</a>
          </div>
          <div>
            <h4>Company</h4>
            <a href="/">About Us</a>
            <a href="">Features</a>
            <a href="">Careers</a>
          </div>
          <div>
            <h4>Resource</h4>
            <a href="/">Press Info</a>
            <a href="">Customers</a>
            <a href="">Reviews</a>
          </div>
        </div>
        <hr />
        <div>
          <p>@2023 travelo | All Rights Reserved</p>
          <div>
            <p>We Accept Payment:</p>
            <img src="./images/icons/logos_stripe.svg" alt="Stripe Logo" />
            <img src="./images/icons/Paypal.svg" alt="Paypal Logo" />
            <img src="./images/icons/Payonner 1.svg" alt="Payoneer Logo" />
          </div>
        </div>
      </div>
    </footer>
    <script src="./main.js"></script>
    <script>
      // Check if the email already exists in local storage
      let loggedIn = JSON.parse(localStorage.getItem("loggedIn"));

      if (!loggedIn) {
        localStorage.setItem("loggedIn", false);
      }
      function isEmailExists(email) {
        const users = JSON.parse(localStorage.getItem("users"));
        if (users) {
          return users.some((user) => user.email === email);
        }
        return false;
      }

      // Save user data to local storage
      function saveUserData(name, email, password) {
        const users = JSON.parse(localStorage.getItem("users")) || [];
        users.push({ name, email, password });
        localStorage.setItem("users", JSON.stringify(users));
      }

      // Login event handler
      function login(event) {
        event.preventDefault();
        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;

        const users = JSON.parse(localStorage.getItem("users"));
        if (users) {
          const user = users.find(
            (user) => user.email === email && user.password === password
          );
          if (user) {
            showLoginSuccessMessage();
            localStorage.setItem("loggedIn", true);
            if (!user.cart) {
              user.cart = [];
            }
            localStorage.setItem("user-login", JSON.stringify(user));
            resetLoginForm();
            window.location.href = "/";
          } else {
            alert("Invalid email or password.");
          }
        } else {
          alert("Invalid email or password.");
        }
      }

      // Signup event handler
      function signup(event) {
        event.preventDefault();
        const name = document.getElementById("signupName").value;
        const email = document.getElementById("signupEmail").value;
        const password = document.getElementById("signupPassword").value;
        const confirmPassword = document.getElementById(
          "signupConfirmPassword"
        ).value;

        if (password.length < 8) {
          alert("Password must be at least 8 characters long.");
          return;
        }

        if (password !== confirmPassword) {
          alert("Passwords do not match.");
          return;
        }

        if (isEmailExists(email)) {
          alert("Email already exists. Please login instead.");
          return;
        }

        saveUserData(name, email, password);
        showSignupSuccessMessage();
        resetSignupForm();
      }

      // Show success message popup for login
      function showLoginSuccessMessage() {
        const successMessage = document.getElementById("successMessage");
        successMessage.style.display = "block";
        setTimeout(() => {
          successMessage.style.display = "none";
        }, 2000);
      }

      // Show success message popup for signup
      function showSignupSuccessMessage() {
        const signupSuccessMessage = document.getElementById(
          "signupSuccessMessage"
        );
        signupSuccessMessage.style.display = "block";
        setTimeout(() => {
          signupSuccessMessage.style.display = "none";
        }, 2000);
      }

      // Reset login form
      function resetLoginForm() {
        document.getElementById("loginEmail").value = "";
        document.getElementById("loginPassword").value = "";
      }

      // Reset signup form
      function resetSignupForm() {
        document.getElementById("signupName").value = "";
        document.getElementById("signupEmail").value = "";
        document.getElementById("signupPassword").value = "";
        document.getElementById("signupConfirmPassword").value = "";
      }

      // Switch between login and signup tabs
      function openTab(event, tabName) {
        const tablinks = document.getElementsByClassName("tablinks");
        for (let i = 0; i < tablinks.length; i++) {
          tablinks[i].classList.remove("active");
        }
        event.currentTarget.classList.add("active");

        const tabcontent = document.getElementsByClassName("tabcontent");
        for (let i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        document.getElementById(tabName).style.display = "block";
      }

      // Set the default active tab
      document.getElementById("loginTab").click();
    </script>
  </body>
</html>
